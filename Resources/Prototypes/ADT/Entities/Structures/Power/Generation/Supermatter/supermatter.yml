- type: entity
  id: Supermatter
  name: supermatter crystal
  description: A strangely translucent and iridescent crystal.
  placement:
    mode: SnapgridCenter
  components:
    - type: Supermatter
      whitelist:
        tags:
          - EmitterBolt
        components:
          - Body
          - Item
    - type: RadiationSource
    - type: AmbientSound
      range: 5
      volume: 0
      sound:
        path: /Audio\ADT\Supermatter/calm.ogg
    - type: Physics
    - type: Speech
      speechSounds: Pai
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeAabb
            bounds: "-0.25,-0.25,0.25,0.25"
          mask:
            - Impassable
            - MidImpassable
            - HighImpassable
            - LowImpassable
            - InteractImpassable
            - Opaque
          layer:
            - MidImpassable
            - HighImpassable
            - BulletImpassable
            - InteractImpassable
    - type: Transform
      anchored: true
      noRot: true
    - type: CollisionWake
      enabled: false
    - type: Clickable
    - type: InteractionOutline
    - type: Sprite
      drawdepth: WallMountedItems
      sprite: ADT\Structures\Power\Supermatter.rsi
      state: supermatter
    - type: Icon
      sprite: ADT\Structures\Power\Supermatter.rsi
      state: supermatter
    - type: PointLight
      enabled: true
      radius: 10
      energy: 5
      color: "#ffe000"
    - type: Explosive
      explosionType: Supermatter
      maxIntensity: 10000
      intensitySlope: 5
      totalIntensity: 10000
    - type: GuideHelp
      guides: [ Supermatter, Power ]

- type: entity
  id: SupermatterCascade
  parent: BaseAnomaly
  suffix: Flesh
  components:
  - type: Anomaly
    corePrototype: AnomalyCoreFlesh
    coreInertPrototype: AnomalyCoreFleshInert
    minPulseLength: 180
    maxPulseLength: 300
  - type: Sprite
    layers:
    - state: anom5
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: anom5-pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: PointLight
    radius: 2.0
    energy: 7.5
    color: "#cb5b7e"
    castShadows: false
  - type: TileSpawnAnomaly
    entries:
    - settings:
        spawnOnPulse: true
        spawnOnStabilityChanged: true
        minAmount: 3
        maxAmount: 7
        maxRange: 4
      floor: FloorFlesh
    - settings:
        spawnOnSuperCritical: true
        minAmount: 10
        maxAmount: 30
        maxRange: 10
      floor: FloorFlesh
  - type: EntitySpawnAnomaly
    entries:
    - settings:
        spawnOnPulse: true
        minAmount: 1
        maxAmount: 4
        minRange: 1.5
        maxRange: 2.5
      spawns:
      - FleshBlocker
    - settings:
        spawnOnPulse: true
        maxAmount: 3
        minRange: 3
        maxRange: 4.5
      spawns:
      - MobFleshJared
      - MobFleshGolem
      - MobFleshClamp
      - MobFleshLover
    - settings:
        spawnOnSuperCritical: true
        minAmount: 10
        maxAmount: 15
        minRange: 5
        maxRange: 15
      spawns:
      - FleshBlocker
    - settings:
        spawnOnSuperCritical: true
        minAmount: 5
        maxAmount: 10
        maxRange: 8
      spawns:
      - MobFleshJared
      - MobFleshGolem
      - MobFleshClamp
      - MobFleshLover
    - settings:
        spawnOnSuperCritical: true
        minAmount: 5
        maxAmount: 8
        maxRange: 10
      spawns:
      - FleshKudzu
    - settings:
        spawnOnShutdown: true
        maxAmount: 2
        maxRange: 1
      spawns:
      - MobFleshJared
      - MobFleshGolem
      - MobFleshClamp
      - MobFleshLover
      - FleshKudzu