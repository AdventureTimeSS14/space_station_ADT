- type: entity
  name: slime
  description: A slime.
  id: ADTMobSlimesGeras
  parent:
  - BaseSimpleMob
  - MobCombat
  - MobBloodstream
  - MobFlammable
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: ADT/Mobs/Aliens/slimes.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: white_adult_slime
  - type: DamageStateVisuals
    states:
      Alive:
        Base: white_adult_slime
      Dead:
        Base: white_adult_slime_dead
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.30
        density: 80
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Critical
      200: Dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 3
    baseSprintSpeed: 5
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Effects/Footsteps/slime1.ogg
      params:
        volume: 3
  - type: Tag
    tags:
    - ADTSlimeEmotes
    - FootstepSound
    - DoorBumpOpener
  - type: Damageable
    damageContainer: Biological
    damageModifierSet: Slime
  - type: Bloodstream
    bloodReagent: Slime
    bloodMaxVolume: 150
    bloodlossDamage:
      types:
        Bloodloss:
          0.5
    bloodlossHealDamage:
      types:
        Bloodloss:
          -0.25
  - type: Body
    prototype: ADTGeras
    requiredLegs: 1
  - type: MeleeWeapon
    attackRate: 2
    altDisarm: false
    soundHit:
      path: /Audio/Weapons/punch3.ogg
    angle: 0
    animation: WeaponArcPunch
    damage:
      types:
        Blunt: 4
  - type: InteractionPopup
    successChance: 1
    interactSuccessString: petting-success-slimes
    interactSuccessSound: /Audio/Effects/thudswoosh.ogg
  - type: Speech
    speechVerb: Slime
    speechSounds: Slime
    allowedEmotes: ['Squish']
  - type: TypingIndicator
    proto: slime
  - type: Vocal
    sounds:
      Unsexed: FemaleSlime
  - type: LanguageSpeaker
    languages:
      GalacticCommon: Speak
      Bubblish: Speak
  - type: Prying
    pryPowered: false
    force: false
    speedModifier: 1
    useSound:
      path: /Audio/Items/crowbar.ogg
  - type: Internals
  - type: Buckle
  # - type: StandingState #зачем им ползать? хз они даже не готовы
  - type: ProjectileIgnoreCrawling
  - type: NpcFactionMember
    factions:
    - NanoTrasen
  - type: Climbing
  - type: NameIdentifier
    group: GenericNumber
  - type: SlowOnDamage
    speedModifierThresholds:
      60: 0.7
      80: 0.5
  - type: MobPrice
    price: 150
  - type: Hunger
  - type: Thirst
  - type: FloatingVisuals
  - type: Geras
    noAction: true
  - type: PassiveDamage
    allowedStates:
    - Alive
    damageCap: 65
    damage:
      types:
        Heat: -0.14
      groups:
        Brute: -0.14
  - type: Barotrauma
    damage:
      types:
        Blunt: 0.50
        Heat: 0.2
  - type: Respirator
    damage:
      types:
        Asphyxiation: 0.2
    damageRecovery:
      types:
        Asphyxiation: -1.0
    maxSaturation: 15
  - type: RadiationPopup
  - type: StatusEffects
    allowed:
    - Stun
    - KnockedDown
    - SlowedDown
    - Stutter
    - SeeingRainbows
    - Electrocution
    - Drunk
    - SlurredSpeech
    - RatvarianLanguage
    - PressureImmunity
    - Muted
    - ForcedSleep
    - TemporaryBlindness
    - Pacified
    - StaminaModifier
    - Flashed
    - RadiationProtection
    - Drowsiness
    - Adrenaline
    - ADTHallucinations
    - ADTStarvation
  - type: SleepEmitSound
  - type: BloodCough
    postingSayDamage: blood-cough
  - type: TimeDespawnDamage
  - type: Hands # They still don't have hands.
  - type: ComplexInteraction

- type: entity
  name: basic slime
  id: BaseMobXenoSlime
  parent: [ SimpleMobBase, MobCombat ]
  abstract: true
  description: It looks so much like jelly. I wonder what it tastes like?
  components:
  - type: Appearance
  - type: Hunger
    startingHunger: 50
    thresholds:
      Overfed: 250
      Okay: 100
      Peckish: 25 #Baby Slimes will begin hunting here, Adult Slimes will target their tamers here.
      Starving: 10
      Dead: 0
    hungerThresholdDecayModifiers:
      Okay: 1.5
      Peckish: 0.4
      Starving: 0.2
      Dead: 0.1
    baseDecayRate: 0.5
    starvingSlowdownModifier: 0
  - type: Sprite
    drawdepth: Mobs
    sprite: ADT/Xenobiology/Mobs/slimesBaby.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: base
  - type: DamageStateVisuals
    states:
      Dead:
        Base: dead
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.30
        density: 80
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 2
    baseSprintSpeed: 4
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Effects/Footsteps/slime1.ogg
      params:
        volume: 3
  - type: Tag
    tags:
    - FootstepSound
    - DoorBumpOpener
    - XenoSlime
  - type: Butcherable
    butcheringType: Knife
    spawned:
    - id: FoodMeatSlime
      amount: 2
  - type: Respirator
    damage:
      types:
        Asphyxiation: 0.2
    damageRecovery:
      types:
        Asphyxiation: -1.0
    maxSaturation: 15
  - type: Damageable
    damageContainer: Biological
    damageModifierSet: Slime
  - type: Bloodstream
    bloodReagent: Slime
    bloodlossDamage:
      types:
        Bloodloss:
          0.5
    bloodlossHealDamage:
      types:
        Bloodloss:
          -0.25
  - type: Barotrauma
    damage:
      types:
        Blunt: 0.45
  - type: Reactive
    groups:
      Flammable: [ Touch ]
      Extinguish: [ Touch ]
    reactions:
    - reagents: [ Water, SpaceCleaner ]
      methods: [ Touch ]
      effects:
      - !type:WashCreamPieReaction
    - reagents: [ Water ]
      methods: [ Touch ]
      effects:
      - !type:HealthChange
        scaleByQuantity: true
        damage:
          types:
            Caustic: 5
      - !type:PopupMessage
        type: Local
        messages: [ "slime-hurt-by-water-popup" ]
        probability: 0.25
  - type: Body
    prototype: Slimes
    requiredLegs: 1
  - type: InteractionPopup
    successChance: 0.5
    interactSuccessString: petting-success-slimes
    interactFailureString: petting-failure-generic
  - type: VentCrawler
  - type: Speech
    speechVerb: Slime
    speechSounds: Slime
    allowedEmotes: ['Squish']
  - type: TypingIndicator
    proto: slime
  - type: ReplacementAccent
    accent: slimes
  - type: NpcFactionMember
    factions:
    - SimpleHostile
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: []
  - type: ActionGrant
    actions:
    - SlimeLatch
  - type: HTN
    rootTask:
      task: XenoSlimeCompound

# Begin Slimes

- type: entity
  name: grey slime
  id: MobXenoSlime
  parent: BaseMobXenoSlime
  suffix: Baby
  description: It looks so much like jelly. I wonder what it tastes like?
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: ADT/Xenobiology/Mobs/slimesBaby.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: base
      color: "#828282"
  - type: MobGrowth
    hungerRequired: 100
    currentStage: baby
    stages:
      baby:
        nextStage: adult
        sprite: ADT/Xenobiology/Mobs/slimesBaby.rsi
        displayName: baby
      adult:
        sprite: ADT/Xenobiology/Mobs/slimesAdult.rsi
        displayName: adult
  - type: Slime
    breed: GreyMutation
    slimeColor: "#828282"
    maxOffspring: 4
    mutationChance: 0.45
    potentialMutations:
    - OrangeMutation
    - PurpleMutation
    - BlueMutation
    - MetalMutation

- type: entity
  name: grey slime
  id: MobXenoSlimeAdult
  parent: MobXenoSlime
  suffix: Adult
  description: It looks so much like jelly. I wonder what it tastes like?
  components:
  - type: MobGrowth
    hungerRequired: 100
    currentStage: adult
    stages:
      baby:
        nextStage: adult
        sprite: ADT/Xenobiology/Mobs/slimesBaby.rsi
        displayName: baby
      adult:
        sprite: ADT/Xenobiology/Mobs/slimesAdult.rsi
        displayName: adult

- type: entity
  name: slime
  id: TestRandomBreedMobXenoSlime
  parent: MobXenoSlime
  suffix: Test
  description: It looks so much like jelly. I wonder what it tastes like?
  components:
  - type: RandomBreedOnSpawn
    mutations:
    - GreyMutation
    - OrangeMutation
    - PurpleMutation
    - BlueMutation
    - MetalMutation
    - YellowMutation
    - DarkPurpleMutation
    - DarkBlueMutation
    - SilverMutation
    - BluespaceMutation
    - SepiaMutation
    - CeruleanMutation
    - PyriteMutation
    - RedMutation
    - GreenMutation
    - PinkMutation
    - GoldMutation
    - OilMutation
    - LightPinkMutation
    - BlackMutation
    - AdamantineMutation
    - RainbowMutation

- type: entity
  id: RemoteEye
  parent:
  - Incorporeal
  - BaseMob
  name: remote eye
  description: A remote viewing eye.
  categories: [ HideSpawnMenu, DoNotMap ]
  components:
  - type: RemoteEye
  - type: RemoteEyeOverlay
  - type: NoFTL
  - type: Eye
    drawFov: false
  - type: Input
    context: human
  - type: Examiner
  - type: MovementSpeedModifier
    baseWalkSpeed: 8
    baseSprintSpeed: 8
  - type: ContentEye
    maxZoom: 5, 5

- type: entity
  id: XenobioCameraConsole
  name: xenobiology camera console
  description: Console for monitoring xenobiology cameras.
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    sprite: Structures/Machines/computers.rsi
    layers:
    - map: ["computerLayerBody"]
      state: computer
    - map: ["computerLayerKeyboard"]
      state: generic_keyboard
    - map: ["computerLayerScreen"]
      state: xenobiology
    - map: ["computerLayerKeys"]
      state: tech_key
    - map: [ "enum.WiresVisualLayers.MaintenancePanel" ]
      state: generic_panel_open
  - type: Appearance
  - type: Transform
    anchored: true
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.45,-0.45,0.45,0.45"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 200
  - type: RemoteEyeConsole
  - type: ApcPowerReceiver
  - type: ExtensionCableReceiver

- type: entity
  id: XenobioCamera
  name: xenobiology camera
  description: Security camera for monitoring xenobiology areas.
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    sprite: Structures/Wallmounts/camera.rsi
    state: camera
  - type: Transform
    anchored: true
  - type: RemoteEyeCamera
    range: 15.0
  - type: ApcPowerReceiver
  - type: ExtensionCableReceiver

- type: entity
  id: ActionReturnFromRemoteEye
  name: Return to Body
  description: Return to your original body from camera view.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    itemIconStyle: BigAction
    icon:
      sprite: Interface/Actions/actions_ai.rsi
      state: ai_core
  - type: InstantAction
    event: !type:ReturnFromRemoteEyeEvent
